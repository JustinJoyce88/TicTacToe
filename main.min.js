const startModal=document.getElementById("startGameModal"),endModal=document.getElementById("endGameModal"),message=document.getElementById("message"),closeBtn=document.getElementById("closeBtn"),startGame=document.getElementById("startGameBtn"),resetGame=document.getElementById("resetGameBtn"),modalX=document.getElementById("modalX"),modalO=document.getElementById("modalO"),playArea=document.querySelectorAll(".play-area"),playAgain=document.getElementById("play-again"),x="&times;",o="&Omicron;";let player="",aiChoice,aiBoard=[0,1,2,3,4,5,6,7,8],board=[0,1,2,3,4,5,6,7,8],gameWin=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],reset=()=>{playArea.forEach((val,i)=>playArea[i].innerHTML=""),player="",board=[0,1,2,3,4,5,6,7,8],aiBoard=[0,1,2,3,4,5,6,7,8],gameWin=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]},startGameModal=()=>{startModal.style.display="block"},endGameModal=str=>{endModal.style.display="block",message.innerText=str},choseX=()=>{reset(),player=x,startModal.style.display="none"},choseO=()=>{reset(),player=o,startModal.style.display="none"},clickOutside=e=>{e.target==startModal?startModal.style.display="none":e.target==endModal&&(endModal.style.display="none")},closeModal=()=>{endModal.style.display="none"};startGame.addEventListener("click",startGameModal),resetGame.addEventListener("click",reset),modalX.addEventListener("click",choseX),modalO.addEventListener("click",choseO),window.addEventListener("click",clickOutside),closeBtn.addEventListener("click",closeModal);let playGame=()=>{playArea.forEach((val,i)=>{playArea[i].addEventListener("click",function(){""==this.innerHTML&&(this.innerHTML=player,player==x&&(alterGameWin(board[i],"X"),console.log(gameWin),board[i]="X"),player==o&&(alterGameWin(board[i],"O"),board[i]="O"),checkTurnWin(),aiBoard=board.filter(val=>"X"!=val&&"O"!=val),aiChoice=aiBoard[Math.floor(Math.random()*aiBoard.length)],player===x&&(alterGameWin(board[aiChoice],"O"),board[aiChoice]="O",playArea[aiChoice].innerHTML=o),player===o&&(alterGameWin(board[aiChoice],"X"),board[aiChoice]="X",playArea[aiChoice].innerHTML=x),checkTurnWin())})})},checkTurnWin=()=>{let checkWinX=gameWin.some((val,i)=>gameWin[i].every(val=>"X"===val)),checkWinO=gameWin.some((val,i)=>gameWin[i].every(val=>"O"===val));if(!0===checkWinO&&player==o||!0===checkWinX&&player==x)endGameModal("You won against mindless ai!"),reset();else if(!0===checkWinO||!0===checkWinX)endGameModal("You Lose! Seriously?"),reset();else{let checkDraw;9===board.filter(val=>"X"===val||"O"===val).length&&(endGameModal("Draw!"),reset())}},alterGameWin=(num,str)=>{gameWin.forEach((val,i)=>{val.map((val,j)=>{gameWin[i][j]==num&&(gameWin[i][j]=str)})})};playGame();